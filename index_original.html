<!DOCTYPE html >
<html>
<head>
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
	
	<link rel='shortcut icon' type='image/png' href='./img/favicon.png'/>


	
	<!-- CSS Files -->
	<link rel="stylesheet" type='text/css' href='./js/jquery.ui/jquery-ui.min.css'>
	<link rel="stylesheet" type="text/css" href="./CSS/experiment.css">

	<!-- Javascript Files -->
    <!-- FIREBASE -->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-firestore.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyDUcWjGZM1fvL22wgiZGBc3N4Isv_kt5GI",
        authDomain: "dynamicinference.firebaseapp.com",
        databaseURL: "https://dynamicinference.firebaseio.com",
        projectId: "dynamicinference",
        storageBucket: "dynamicinference.appspot.com",
        messagingSenderId: "351957370332",
        appId: "1:351957370332:web:8cea28afc23740b1363b19",
        measurementId: "G-DJQQVW7EH8"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>

	<!-- UI and logic scripts -->
	<script src='./js/jquery-3.4.1.min.js'></script>
	<script src='./js/jquery.ui/jquery-ui.min.js'></script>
    <script src="./js/survey.js"></script>
	<script src="./js/sliders.js"></script>
	<!-- Chart.js and plot logic -->
	<script src='https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js'></script>
	<!--Math display-->
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<title>Experiment</title>

</head>
<body>
<div id="topbar"></div>

<div id="header">
	<h1 style='align-self: center;'>Sliders Game</h1>
</div>
<div class='survey-window'>
    <div class='survey-display'>
        <div class='survey-page' id='page-0'>
            <p>
                <strong>Welcome to the dynamic inference experiment</strong>
                <br>
                This experiment has been approved by the UCL ethics commitee. Please read the following carefully before moving on.
                <br> 
                Please make sure you consent to the following
                <br>                
                - Your data being used for research purposes but will be anonymised
                <br>
                - You can stop the experiment at anytime if you feel uncomfortable with the content or simply wish to.
            </p>
        </div>
        <div class='survey-page' id='page-1'>
            <p>
                Forms of causal reasoning (reasoning about causes and effects) are extremely common in everyday situations.
                For example, you might use causal reasoning when deciding what to eat (e.g. avoiding certain <strong>foods</strong> you know might <strong>cause</strong> you <strong>stomach pains</strong>).
                Any situation involving reasoning about causes and effects can be represented in what we call a <strong>"causal model"</strong>. 
                <br>
                Causal models are essentially diagramming that allow you to represent objects, events, items of information etc. as” NODES" <strong>(circles)</strong> 
                and draw arrows between these nodes to represent the relationship between them (e.g. cause and effect). 
                <br>
                For example, if you wanted to represent the following information in a causal model: 
                <br>
            </p>
            <span style='align-self: center;'><strong>"<u>rain</u> and a <u>sprinkler</u> can both make the <u>grass wet</u>"</strong></span><br>
            <p>
                You would first identify your elements of interest (nodes; RAIN, SPRINKLER, WET GRASS) and using arrows represent <strong>RAIN and SPRINKLER</strong> as causes of the effect: <strong>WET GRASS</strong>.                 The causal model would therefore look like the one below:
            </p>
            <img src='./img/pageOne-graph.png'>
        </div>
        <div class='survey-page' id='page-2'>
            <p>
                Sometimes, you might also want to say whether the cause makes the effect <strong>MORE</strong> or <strong>LESS</strong> likely  e.g. rain makes wet grass MORE likely but if you had another node representing "sunshine" this would make the effect (wet grass) LESS likely.
                <br><br>
                To show this, you can either have a plus (+) or (-) sign next to the arrow to say if the cause makes the effect more likely (+) or less likely (-).
                <br><br>
                This can be shown in the causal model diagram below:
            </p>
            <img src='./img/pageTwo-graph.png'>
        </div>
        <div class='survey-page' id='page-3'>
            <div class='page-3-upper'>
                <p>
                    In today's task, you will first be presented with a set of concepts and asked to draw your own representation of their causal links using a tool called Loopy. 
                    Loopy is an online tool that allows you to draw causal models by simply drawing nodes as circles and arrows to show the relation between these. 
                    <br>
                    Please open Loopy now <strong><u>in a new tab</strong></u> following this link: <a target="_blank" href='https://ncase.me/loopy/v1.1/'>https://ncase.me/loopy/v1.1/</a> so that you can switch back and forth between Loopy and this survey.
                    <br><br>
                    <strong>Here are how some example structures would look like in Loopy:<br></strong>
                </p>
            </div>
            <div class='page-3-middle'>
                <div class='graph-container'>
                    <p><u>1) Simple cause and effect where the node A is the cause and B is the effect</u></p>
                    <img class='page-3-graph'src='./img/pageFour-graphOne.png'>
                </div>
                <div class='graph-container'>
                    <p><u>2) Simple common cause diagram where node A is the cause of both B and C </u></p>
                    <img class='page-3-graph' src='./img/pageFour-graphTwo.png'>
                </div>
                <div class='graph-container'>
                    <p><u>3) Simple common effect diagram where node A and Node B both cause the effect C</u></p>
                    <img class='page-3-graph' src='./img/pageFour-graphThree.png'>
                </div>
            </div>
        </div>
        <div class='survey-page' id='page-4'>
            <p>
                Now open loopy the loopy tab (following this link: <a target="_blank" href='https://ncase.me/loopy/v1.1/'>https://ncase.me/loopy/v1.1/</a>) and keep it open in a separate tab for the duration of this experiment. 
                <br><br>
                Delete anything on the initial screen using the ERASER tool and replicate each of the above diagrams as best as you can on the same page. 
                <br><br>
                To draw a node simply use the PENCIL tool to draw a circle. You can rename your node and change its colour using the options on the right hand of the screen. 
                <br><br>
                To draw an arrow between two nodes simply use the PENCIL tool to draw a line between them. The default arrow will have a "+" sign. This is all you will need for the present study so there is no need to ever change it to a "-”.
                <br><br>
                When you are done drawing each diagram (on the same page), go to the right-hand menu on the Loopy webpage and click "save as link".
                Paste the link in the text entry box below.
                <br><br>
            </p>
            <div class='loopy-link-container'>
                <input class='loopy-input' id='loopy-1' value='Paste your loopy link here'></input>
                <button class='loopy-validate' id='loopy-1-validate'>Validate</button>
            </div>
            <span class='loopy-alert' id='loopy-1-alert'></span>
        </div>
        <div class='survey-page' id='page-5'>
            <p>
                <strong>One last practice round before you get started! 
                Clear your loopy page and start a new one!</strong>
                <br><br>
                Please represent the information below in a causal diagram on a fresh loopy page. 
                <br><br>
                <u>"Tom has a cough. The doctor thinks that it could be a symptom of either asthma or the flu". </u>
                <br><br>
                Remember to rename your nodes with informative names (e.g. "cough").
                <br><br>
                Once you have finished, click "save as link" on the right-hand side menu and paste the link in the text box below.  
                <br><br>
                Keep the diagram as simple as you can.
                <br><br>
            </p>
            <div class='loopy-link-container'>
                <input class='loopy-input' id='loopy-2' value='Paste your loopy link here'></input>
                <button class='loopy-validate' id='loopy-2-validate'>Validate</button>
            </div>
            <span class='loopy-alert' id='loopy-2-alert'></span>
        </div>
        <div class='survey-page' id='page-6'>
            <div class='condition-container'>
                <p>
                    <strong>Let us start. </strong>
                    <br><br>
                    Please draw the arrows that correspond to your understanding of the causal dynamics in the following scenario. 
                    <br><br>
                    <u>You are a small town mayor who is trying to understand the interplay between Criminality, Police action and the Satisfaction of your population.</u>
                    <br><br>
                    This is a complicated issue but sadly you only have access to three key indices:
                    <br>
                    - <strong>Crime Rate</strong>, representing the amount of Criminality in your town.
                    <br>
                    - <strong>Police action</strong>, representing the intensity of police action in your town
                    <br>
                    - <strong>Population satisfaction</strong>, representing how happy the population of you town is.
                    <br><br>
                    Without renaming, adding or removing nodes in the following loopy page, draw the arrows that you believe best how these concepts may affect each other.
                    Follow this link to a preset loopy page: <a target="_blank" href='https://ncase.me/loopy/v1.1/?data=[[[3,480,237,0.5,%22Crime%2520rate%22,4],[4,800,238,0.5,%22Police%2520action%22,0],[5,646,464,0.5,%22Population%2520Satisfaction%22,3]],[],[],5%5D'>Loopy Criminality</a>
                    <br><br>
                    Once you have finished, click "save as link" on the right-hand side menu and paste the link in the text box below.  
                    <br><br>
                    Keep the diagram as simple as you can.
                    <br><br>
                </p>
            </div>
            <div class='loopy-link-container'>
                <input class='loopy-input' id='loopy-3' value='Paste your loopy link here'></input>
                <button class='loopy-validate' id='loopy-3-validate'>Validate</button>
            </div>
            <span class='loopy-alert' id='loopy-3-alert'></span>
        </div>
        <div class='survey-page' id='page-7'>
            <div class='game-display'>
                <!-- Sliders display -->
                <div class='slider_container'>
                    <div class='slider_box' id='slider_container_1'>
                        <label for='slider_X' class='slider-label' id='x_label'>X</label>
                        <div class="slider" id='slider_X'>
                            <div id="custom-handle-1" class="ui-slider-handle"></div>
                        </div>
                    </div>
                    <div class='slider_box' id='slider_container_2'>
                        <label for='slider_Y' class='slider-label' id='y_label'>Y</label>
                        <div class="slider" id='slider_Y'>
                            <div id="custom-handle-2" class="ui-slider-handle"></div>
                        </div>
                    </div>
                    <div class='slider_box' id='slider_container_3'>
                        <label for='slider_Z' class='slider-label' id='z_label'>Z</label>
                        <div class="slider" id='slider_Z'>
                            <div id="custom-handle-3" class="ui-slider-handle"></div>
                        </div>
                    </div>
                </div>
                <!-- Chart display -->
                <div class='chart_container'>
                    <canvas id='progressPlot'>
                    </canvas>
                </div>
            </div>
            <div class='button_container'>
                <button class='process' id='start_button'>Start</button>
                <button class='process' id='stop_button'>Pause</button>
                <button class='process' id='reset_button'>Reset</button>
            </div>
        </div>
    </div>
    <div class='nav-bar'>
	    <button class='nav-button' id='prev_button'>Prev</button>
	    <button class='nav-button' id='next_button'>Next</button>
    </div>
</div>
<div id="footer">
</div>

<script src='./js/dbTest.js'></script>
</body>
</html>
